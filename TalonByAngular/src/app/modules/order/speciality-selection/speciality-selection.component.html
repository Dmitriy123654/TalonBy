<div class="speciality-page">
  <!-- Мобильное меню -->
  <div class="mobile-details" *ngIf="isMobile">
    <div class="mobile-header" (click)="toggleDetails()">
      <h1>{{hospital?.name}}</h1>
      <span class="toggle-btn">
        {{isDetailsOpen ? '‹ Скрыть' : 'Показать подробнее ›'}}
      </span>
    </div>

    <div class="mobile-content" [class.open]="isDetailsOpen">
      <!-- Info Grid -->
      <div class="info-grid">
        <div class="address-block">
          <p>{{hospital?.address}}</p>
          <a href="#" class="map-link">показать на карте</a>
        </div>
        <div class="registry-block">
          <div class="phones">
            <ng-container *ngFor="let item of getPhones()">
              <span *ngIf="item.isLabel" class="label">{{item.text}}</span>
              <a *ngIf="!item.isLabel" href="tel:{{item.text}}">{{item.text}}</a>
            </ng-container>
          </div>
        </div>
        <div class="schedule-block">
          <div class="schedule-row">
            <span class="label">ПН-ПТ:</span>{{getWorkingHours('ПН-ПТ')}}
          </div>
          <div class="schedule-row">
            <span class="label">СБ:</span>{{getWorkingHours('СБ')}}
          </div>
        </div>
        <div class="contacts-block">
          <a *ngIf="hospital?.website" href="{{hospital?.website}}" class="website">{{getDomain(hospital?.website)}}</a>
          <a *ngIf="hospital?.email" href="mailto:{{hospital?.email}}" class="email">{{hospital?.email}}</a>
        </div>
      </div>

      <!-- Hospital Nav -->
      <nav class="hospital-nav">
        <ul>
          <li><a href="#">Информация</a></li>
          <li><a href="#">Врачи</a></li>
          <li><a href="#">Расписание врачей</a></li>
        </ul>
      </nav>
    </div>
  </div>

  <!-- Десктопная версия -->
  <div class="hospital-header" *ngIf="!isMobile && hospital">
    <div class="wrapper">
      <div class="hospital-info">
        <h1>{{hospital.name}}</h1>
        <div class="info-grid">
          <div class="address-block">
            <p>{{hospital.address}}</p>
            <a href="#" class="map-link">показать на карте</a>
          </div>
          <div class="registry-block">
            <div class="label"></div>
            <div class="phones">
              <ng-container *ngFor="let item of getPhones()">
                <span *ngIf="item.isLabel" class="label">{{item.text}}</span>
                <a *ngIf="!item.isLabel" href="tel:{{item.text}}">{{item.text}}</a>
              </ng-container>
            </div>
          </div>
          <div class="schedule-block">
            <div class="schedule-row">
              <span class="label">ПН-ПТ:</span>{{getWorkingHours('ПН-ПТ')}}
            </div>
            <div class="schedule-row">
              <span class="label">СБ:</span>{{getWorkingHours('СБ')}}
            </div>
          </div>
          <div class="contacts-block">
            <a *ngIf="hospital.website" href="{{hospital.website}}" class="website">{{getDomain(hospital.website)}}</a>
            <a *ngIf="hospital.email" href="mailto:{{hospital.email}}" class="email">{{hospital.email}}</a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Основной контент -->
  <div class="wrapper">
    <div class="content-block">
      <aside *ngIf="!isMobile">
        <div class="order-steps">
          <div class="step active">Специальность</div>
          <div class="step">Врач</div>
          <div class="step">Дата и время</div>
          <div class="step">Личные данные</div>
          <div class="step">Запись</div>
        </div>

        <nav class="hospital-nav">
          <ul>
            <li><a href="#">Информация</a></li>
            <li><a href="#">Врачи</a></li>
            <li><a href="#">Расписание врачей</a></li>
          </ul>
        </nav>
      </aside>

      <main>
        <h2>Заказ талона</h2>
        <p class="subtitle">Выбор специальности</p>

        <div class="specialities-grid">
          <div *ngIf="loading" class="loading">Загрузка специальностей...</div>
          <div *ngIf="error" class="error">{{error}}</div>
          
          <div class="row" *ngIf="!loading && !error && specialities.length > 0">
            <div class="speciality-card" *ngFor="let speciality of specialities" (click)="selectSpeciality(speciality)">
              <h5>{{speciality.name}}</h5>
            </div>
          </div>
        </div>

        <div class="payment-services">
          <a href="/services">Нет нужной специальности? Возможно, она есть в платных услугах</a>
        </div>
      </main>
    </div>
  </div>
</div>
