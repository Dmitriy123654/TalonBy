<div class="admin-page" *ngIf="currentUser">
  <div class="container">
    <div class="admin-header">
      <h1>Административная панель</h1>
      <p class="user-email">{{ currentUser.email }}</p>
    </div>

    <div class="admin-tabs">
      <ul class="tabs">
        <li *ngIf="isTabVisible('appointments')" class="tab" [class.active]="activeTab === 'appointments'" (click)="setActiveTab('appointments')">
          Талоны
        </li>
        <li *ngIf="isTabVisible('schedule')" class="tab" [class.active]="activeTab === 'schedule'" (click)="setActiveTab('schedule')">
          Управление расписанием
        </li>
        <li *ngIf="isTabVisible('patients')" class="tab" [class.active]="activeTab === 'patients'" (click)="setActiveTab('patients')">
          Пациенты
        </li>
      </ul>
    </div>

    <div class="admin-content">
      <!-- Appointments tab content -->
      <div class="appointments-section" *ngIf="activeTab === 'appointments'">
        <h2>Управление талонами</h2>
        <app-appointments-management *ngIf="!isLoading"></app-appointments-management>
      </div>

      <!-- Schedule Management tab content -->
      <div class="schedule-section" *ngIf="activeTab === 'schedule'">
        <h2>Управление расписанием</h2>
        <app-schedule-management *ngIf="!isLoading"></app-schedule-management>
      </div>

      <!-- Patients tab content -->
      <div class="patients-section" *ngIf="activeTab === 'patients'">
        <h2>Управление пациентами</h2>
        <app-patient-management *ngIf="!isLoading"></app-patient-management>
      </div>
    </div>
  </div>
</div>

<!-- Loading state -->
<div class="loading" *ngIf="isLoading">
  <div class="spinner-container">
    <div class="spinner"></div>
    <p>Загрузка данных...</p>
  </div>
</div>

<!-- Error state -->
<div class="error-state" *ngIf="!isLoading && !currentUser">
  <p>Не удалось загрузить данные. Пожалуйста, проверьте подключение и обновите страницу.</p>
  <button (click)="loadUserProfile()" class="btn btn-primary">Повторить</button>
</div>

<!-- Debug state -->
<div class="debug-info" *ngIf="!isLoading && !currentUser" style="display: none;">
  <p>Debug info: isLoading = {{isLoading}}, currentUser = {{currentUser | json}}</p>
</div> 